<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä ETL Cacao - Datasets</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>
<body>
    <!-- Navigation futuriste -->
    <nav class="dashboard-nav">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-icon">
                <i class="fas fa-chart-line"></i>
                </div>
                <span>ETL Cacao</span>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link">Dashboard</a>
                <a href="/datasets" class="nav-link active">Datasets</a>
                <a href="/transformations" class="nav-link">Transformations</a>
            </div>
        </div>
    </nav>

    <!-- Section h√©ro -->
    <section class="hero-dashboard">
        <div class="container">
            <div class="hero-content animate-in">
                <div class="hero-badge animate-in animate-delay-1">
                <i class="fas fa-database"></i>
                    <span>Donn√©es ETL</span>
            </div>
                
                <h1 class="hero-title animate-in animate-delay-2">
                    Datasets
            </h1>
                
                <p class="hero-subtitle animate-in animate-delay-2">
                    Donn√©es de 1,795 barres de chocolat
                </p>
                
                <p class="hero-description animate-in animate-delay-3">
                    Explorez les donn√©es de chocolat √† chaque √©tape du pipeline ETL : donn√©es brutes extraites, 
                    apr√®s nettoyage des caract√®res sp√©ciaux, et dataset final pr√™t pour l'analyse des √©valuations.
            </p>
        </div>
        </div>
    </section>

    <!-- Pipeline des datasets -->
    <section class="container">
        <div class="pipeline-visual">
            <div class="pipeline-step animate-in animate-delay-1">
                <div class="step-icon">
                    <i class="fas fa-file-import"></i>
                </div>
                <div class="step-label">Brute</div>
            </div>
            
            <div class="step-arrow animate-in animate-delay-2">
                <i class="fas fa-arrow-right"></i>
        </div>
            
            <div class="pipeline-step animate-in animate-delay-2">
                <div class="step-icon">
                    <i class="fas fa-broom"></i>
                </div>
                <div class="step-label">Nettoyage</div>
                </div>

            <div class="step-arrow animate-in animate-delay-3">
                <i class="fas fa-arrow-right"></i>
                            </div>
            
            <div class="pipeline-step animate-in animate-delay-3">
                <div class="step-icon">
                    <i class="fas fa-check-circle"></i>
                            </div>
                <div class="step-label">Final</div>
                            </div>
                        </div>
    </section>

    <!-- Grille des datasets -->
    <section class="container">
        <div class="dashboard-grid">
            <!-- Dataset Brut -->
            <div class="dashboard-card animate-in animate-delay-1">
                <div class="card-header">
                    <div class="card-icon" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                        <i class="fas fa-file-import"></i>
                    </div>
                    <h3 class="card-title">Dataset Brut</h3>
                            </div>
                <p class="card-description">
                    Donn√©es brutes de 1,795 barres de chocolat extraites depuis Codecademy. 
                    Contient √©valuations, origines g√©ographiques, pourcentages de cacao avec caract√®res sp√©ciaux.
                </p>
                <div class="card-stats">
                    <div class="stat-item">
                        <span class="stat-number">1,795</span>
                                    <span class="stat-label">Lignes</span>
                                </div>
                    <div class="stat-item">
                        <span class="stat-number">9</span>
                                    <span class="stat-label">Colonnes</span>
                                </div>
                            </div>
                <div class="card-actions">
                    <button class="btn-dashboard btn-secondary" onclick="previewDataset('raw')">
                                <i class="fas fa-eye"></i>
                                Aper√ßu
                            </button>
                    <button class="btn-dashboard" onclick="downloadDataset('raw')">
                                <i class="fas fa-download"></i>
                        T√©l√©charger
                            </button>
                        </div>
                    </div>

            <!-- Dataset Nettoy√© -->
            <div class="dashboard-card animate-in animate-delay-2">
                <div class="card-header">
                    <div class="card-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                        <i class="fas fa-broom"></i>
                            </div>
                    <h3 class="card-title">Dataset Nettoy√©</h3>
                            </div>
                <p class="card-description">
                    Donn√©es de chocolat apr√®s nettoyage des caract√®res sp√©ciaux et normalisation. 
                    Pourcentages de cacao convertis en float, dates en entiers, pays standardis√©s.
                </p>
                <div class="card-stats">
                    <div class="stat-item">
                        <span class="stat-number">1,795</span>
                                    <span class="stat-label">Lignes</span>
                                </div>
                    <div class="stat-item">
                        <span class="stat-number">15</span>
                        <span class="stat-label">√âtapes</span>
                                </div>
                            </div>
                <div class="card-actions">
                    <button class="btn-dashboard btn-secondary" onclick="previewDataset('interim')">
                                <i class="fas fa-eye"></i>
                                Aper√ßu
                            </button>
                    <button class="btn-dashboard" onclick="downloadDataset('interim')">
                                <i class="fas fa-download"></i>
                        T√©l√©charger
                            </button>
                        </div>
                    </div>

            <!-- Dataset Final -->
            <div class="dashboard-card animate-in animate-delay-3">
                <div class="card-header">
                    <div class="card-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                        <i class="fas fa-check-circle"></i>
                            </div>
                    <h3 class="card-title">Dataset Final</h3>
                            </div>
                <p class="card-description">
                    Dataset final des barres de chocolat apr√®s imputation des origines manquantes. 
                    Pr√™t pour analyser les meilleures √©valuations et corr√©lations cacao/qualit√©.
                </p>
                <div class="card-stats">
                    <div class="stat-item">
                        <span class="stat-number">1,795</span>
                                    <span class="stat-label">Lignes</span>
                                </div>
                    <div class="stat-item">
                        <span class="stat-number">100%</span>
                        <span class="stat-label">Qualit√©</span>
                                </div>
                            </div>
                <div class="card-actions">
                    <button class="btn-dashboard btn-secondary" onclick="previewDataset('clean')">
                                <i class="fas fa-eye"></i>
                                Aper√ßu
                            </button>
                    <button class="btn-dashboard" onclick="downloadDataset('clean')">
                                <i class="fas fa-download"></i>
                        T√©l√©charger
                            </button>
                    </div>
                </div>
            </div>
        </section>

    <!-- Modal d'aper√ßu -->
    <div id="previewModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Aper√ßu du Dataset</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="previewContent">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        Chargement des donn√©es...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer futuriste -->
    <footer class="dashboard-footer">
            <div class="footer-content">
                    <div class="footer-logo">
                        <i class="fas fa-chart-line"></i>
                        <span>ETL Cacao</span>
                    </div>
                    <div class="footer-links">
                <a href="/">Dashboard</a>
                        <a href="/datasets">Datasets</a>
                        <a href="/transformations">Transformations</a>
            </div>
            <div class="footer-credits">
                <p>Projet par <strong>Fatoumata Siby</strong></p>
                <a href="https://github.com/fatoumatasiby/etl-cacao" target="_blank" class="github-link">
                    <i class="fab fa-github"></i>
                    Voir sur GitHub
                </a>
            </div>
        </div>
    </footer>

    <style>
        .card-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--gradient-card);
            border: 1px solid var(--dark-border);
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: var(--shadow-card);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--dark-border);
        }

        .modal-header h3 {
            color: white;
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .modal-close:hover {
            color: var(--turquoise);
        }

        .modal-body {
            padding: 2rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .loading {
            text-align: center;
            color: var(--turquoise);
            font-size: 1.1rem;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .data-table th,
        .data-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--dark-border);
        }

        .data-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
        }

        .data-table td {
            color: #cbd5e1;
            font-family: var(--font-mono);
            font-size: 0.9rem;
        }

        .data-table tr:hover {
            background: rgba(32, 212, 212, 0.1);
        }
    </style>

    <script>
        // Animation d'entr√©e des √©l√©ments
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.animate-in').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
            observer.observe(el);
        });

        // Fonctions pour les datasets
        function previewDataset(type) {
            const modal = document.getElementById('previewModal');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('previewContent');
            
            const titles = {
                'raw': 'Dataset Brut - Donn√©es Extraites',
                'interim': 'Dataset Nettoy√© - Apr√®s Transformation',
                'clean': 'Dataset Final - Pr√™t pour l\'Analyse'
            };
            
            title.textContent = titles[type];
            modal.style.display = 'flex';
            
            // Simulation de chargement
            content.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i> Chargement des donn√©es...</div>';
            
            setTimeout(() => {
                // Donn√©es simul√©es
                const sampleData = {
                    'raw': [
                        ['Company', 'Specific Bean Origin', 'REF', 'Review Date', 'Cocoa Percent', 'Company Location', 'Rating', 'Bean Type', 'Broad Bean Origin'],
                        ['A. Morin', 'Agua Grande', '1876', '2016', '63%', 'France', '3.75', '?', 'Sao Tome'],
                        ['A. Morin', 'Kpime', '1676', '2015', '70%', 'France', '2.75', '?', 'Togo'],
                        ['A. Morin', 'Atsane', '1676', '2015', '70%', 'France', '3', '?', 'Togo']
                    ],
                    'interim': [
                        ['Company', 'Specific Bean Origin', 'REF', 'Review Date', 'Cocoa Percent', 'Company Location', 'Rating', 'Bean Type', 'Broad Bean Origin'],
                        ['A. Morin', 'Agua Grande', '1876', '2016', '63.0', 'France', '3.75', '?', 'Sao Tome'],
                        ['A. Morin', 'Kpime', '1676', '2015', '70.0', 'France', '2.75', '?', 'Togo'],
                        ['A. Morin', 'Atsane', '1676', '2015', '70.0', 'France', '3.0', '?', 'Togo']
                    ],
                    'clean': [
                        ['Company', 'Specific Bean Origin', 'REF', 'Review Date', 'Cocoa Percent', 'Company Location', 'Rating', 'Bean Type', 'Broad Bean Origin'],
                        ['A. Morin', 'Agua Grande', '1876', '2016', '63.0', 'France', '3.75', 'Unknown', 'Sao Tome'],
                        ['A. Morin', 'Kpime', '1676', '2015', '70.0', 'France', '2.75', 'Unknown', 'Togo'],
                        ['A. Morin', 'Atsane', '1676', '2015', '70.0', 'France', '3.0', 'Unknown', 'Togo']
                    ]
                };
                
                const data = sampleData[type];
                let tableHTML = '<table class="data-table"><thead><tr>';
                
                data[0].forEach(header => {
                    tableHTML += `<th>${header}</th>`;
                });
                tableHTML += '</tr></thead><tbody>';
                
                data.slice(1, 6).forEach(row => {
                    tableHTML += '<tr>';
                    row.forEach(cell => {
                        tableHTML += `<td>${cell}</td>`;
                    });
                    tableHTML += '</tr>';
                });
                
                tableHTML += '</tbody></table>';
                tableHTML += '<p style="text-align: center; margin-top: 1rem; color: #94a3b8;">Aper√ßu des 5 premi√®res lignes</p>';
                
                content.innerHTML = tableHTML;
            }, 1000);
        }

        function downloadDataset(type) {
            // Simulation de t√©l√©chargement
            const btn = event.target;
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> T√©l√©chargement...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-check"></i> T√©l√©charg√© !';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }, 2000);
            }, 2000);
        }

        function closeModal() {
            document.getElementById('previewModal').style.display = 'none';
        }

        // Fermer le modal en cliquant √† l'ext√©rieur
        document.getElementById('previewModal').addEventListener('click', (e) => {
            if (e.target.id === 'previewModal') {
                closeModal();
            }
        });
    </script>
</body>
</html>
